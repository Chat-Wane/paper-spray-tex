\section{Experimentation}
\label{sec:experiments}
In this section we examine the properties of \SCAMPLON{} and 
compare them to properties of \CYCLON{}, a state-of-the-art cyclic peer sampling service.
As \CYCLON{} uses fixed-sized partial views, we must predefine its partial view size $c$.
As shown by Erd{\H o}s and R{\' e}nyi\cite{erdos1959random} random graphs with less than 
$(|\mathcal{N}|*\ln|\mathcal{N}|)$ connections are likely to partition - 
which is not desired for random peer sampling services.
We want \CYCLON{} to be optimal for a network size of 1000 peers so we set the partial view size 
to $c=7\approx \ln{1000}$ while in each cycle we exchange $l=3$ peers.
We call \CYCLON{} 
undersized when $\ln{|\mathcal{N}}| > c$, 
oversized when $\ln{|\mathcal{N}|} < c$ and 
optimal when $\ln{|\mathcal{N}|} \approx c$.
The experiments\footnote{Implementation: https://github.com/anonymous/anonymous4now}
involve up to 500,000 nodes and are carried out on \PEERSIM{} \cite{peersim}, 
a simulator for peer-to-peer networks.
We define a cycle as $\Delta t$ in which each peer has executed its active protocol once.

We inspect three properties characteristic for random graphs, 
the \emph{average shortest path length}, the \emph{average clustering coefficient},
and \emph{the partial view size distribution}. Additionally, we investigate on
\emph{robustness to random failures}.

\subsection{Clustering coefficient}

\begin{figure}
    \centering
    \includegraphics[width=0.49\textwidth]{img/cluster.eps}
    \caption{Clustering coefficient}
    \label{fig:clustering}
\end{figure}


\begin{asparadesc}
\item[Objective:]
    %% Highlight  
    We want to evaluate to what degree \SCAMPLON{} generates clusters in the overlay.
    To satisfy the random peer sampling objective it is desired that the network has very few clusters,
    thus has a low clustering coefficient.
\item[Description:] 
    The average clustering coefficient $\overline{C}$  measures the connectivity of each peer's neighborhood in the network.
  \begin{equation}
    \overline{C} = {1\over |\mathcal{N}|}\sum\limits_{x\in\mathcal{N}}C_x
    \end{equation}
    where $C_x$ is the local clustering coefficient of Peer $p_x$. The higher
    the coefficient, the more likely the network contains cliques. 
    The experiments involve 100, 1000, 10000 and 100000 peers. 


\item[Results:]

    Figure \ref{fig:clustering} shows that \SCAMPLON{} converges much quicker than \CYCLON{}.
    Furthermore, oversized \CYCLON{} converges to a higher value than \SCAMPLON while 
    it converges to a lower one when undersized.

\item[Reasons:]

    The experiments yield the expected results: 
    \SCAMPLON{} converges much quicker as it is not constraint by a fixed, artificial barrier $l$.
    On the other hand, \CYCLON{} yields a lower clustering coefficient on convergence when undersized.
    This can be explained by the fact that peers in an undersized \CYCLON{} overlay have less connections and 
    thus have a lower probability of forming cliques.
    This, however, makes it more vulnerable to node failure and churn.

\end{asparadesc}



\subsection{Average path length}

\begin{figure}
    \centering
    \includegraphics[width=0.49\textwidth]{img/avgpath.eps}
    \caption{Average shortest path}
    \label{fig:avgpath}
\end{figure}

\begin{asparadesc}
\item[Objective:] 
    For messages to disseminate quickly into the network it is crucial 
    that the shortest path to other peers is, in fact, short.
\item[Description:] The average path length is the average of the shortest path
  length between peers in the graph. It counts the minimum number of hops to
  reach a peer from another given peer.
  For performance reasons, we selected a subset of 7 nodes, calculated their
  average shortest path and averaged it.
\item[Results:]
When undersized, \CYCLON{} yield a shorter average shortest path then \SCAMPLON{}~\ref{fig:clustering}.
\item[Reasons:]
\end{asparadesc}

\subsection{Partial view size distribution}
\begin{figure}
    \centering
    \includegraphics[width=0.49\textwidth]{img/histo.eps}
    \caption{In-degree distribution}
    \label{fig:histo}
\end{figure}

\subsection{Resilience to failure}

\subsection{Churn}
\begin{figure}
    \centering
    \includegraphics[width=0.49\textwidth]{img/churn.eps}
    \caption{Churn}
    \label{fig:churn}
\end{figure}

\label{subsec:churn}




\begin{algorithm}
\input{input/unsubscriptionalgo.tex}
\caption{\label{algo:unsubscription}Unsubscription protocol from
  SCAMP~\cite{ganesh2003peer}}
\end{algorithm}

\subsection{Synthesis}

%%% Local Variables:
%%% mode: latex
%%% TeX-master: "../paper"
%%% End:
