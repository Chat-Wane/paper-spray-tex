
\small
\SetKwProg{Function}{function}{}{}
\SetKwProg{INITIALLY}{INITIALLY}{}{}
\SetKwProg{EVENTS}{EVENTS}{}{}
\DontPrintSemicolon
\LinesNumbered

\INITIALLY {} {
  $\mathcal{P} \leftarrow \varnothing$ \Comment{the partial view is a multiset} \;
}

\EVENTS {} {
  \Function{onSubs($o$)} { % \hfill \comm{$o: origin$}
    \lFor{\textbf{each} $\langle q,\,\_\, \rangle \in\mathcal{P}$}
    {$sendTo(q,\, 'fwdSubs',\, o)$} \label{line:multicast}
  }

  \BlankLine

  \Function{onFwdSubs($o$)} {% \hfill \comm{$o: origin$}
    $\mathcal{P} \leftarrow \mathcal{P}\uplus \left\{\langle o,\, 0 \rangle\right\}$
  }

}
