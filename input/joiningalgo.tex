
\small
\SetKwProg{Function}{function}{}{}
\SetKwProg{INITIALLY}{INITIALLY}{}{}
\SetKwProg{EVENTS}{EVENTS}{}{}
\SetKwComment{tcp}{$\triangleright$~}{}
\DontPrintSemicolon
\LinesNumbered

\INITIALLY {} {
  $\mathcal{P} \leftarrow \varnothing$  \tcp*[r]{the partial view is a multiset}
}

\BlankLine
\BlankLine

\EVENTS {} {
  \Function{\textup{onSubs($o$)} \tcp*[f]{$o$: origin}} { 
    \lForEach{$\langle q, \_ \rangle \in \mathcal{P}$}
       {sendTo($q$, ``$fwdSubs$'', $o$)} \label{line:multicast}
  }

  \BlankLine

  \Function{\textup{onFwdSubs($o$)} \tcp*[f]{$o$: origin}} {
    $\mathcal{P} \leftarrow \mathcal{P}\uplus \left\{\langle o, 0 \rangle\right\}$
  }

}
